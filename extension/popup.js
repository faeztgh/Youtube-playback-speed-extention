import{H as $,P as _,A as U}from"./chunks/AutomationTab-Bl0bq6Us.js";import{j as e,c as R,r as c,g as T,s as f,D as x,S as W,P as D,a as H}from"./chunks/PresetList-CE6TDJkt.js";import{o as J}from"./chunks/messaging-LSX-IhiR.js";const K=({mode:s})=>s==="light"?e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 4V2M12 22v-2M4 12H2M22 12h-2M5.64 5.64 4.22 4.22M19.78 19.78l-1.42-1.42M18.36 5.64l1.42-1.42M4.22 19.78l1.42-1.42",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"})]}):s==="dark"?e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"currentColor",strokeWidth:"1.5",fill:"currentColor"})}):e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("path",{d:"M3 15h18",stroke:"currentColor",strokeWidth:"1.5"})]}),O=({value:s,onChange:n,className:l})=>{const g=["system","light","dark"];return e.jsx("div",{className:(l??"")+" flex items-center gap-1 rounded-lg border border-white/20 bg-white/10 p-0.5",role:"group","aria-label":"Theme",children:g.map(r=>{const o=s===r;return e.jsx("button",{type:"button","aria-pressed":o,onClick:()=>n(r),className:"w-8 h-8 grid place-items-center rounded-md text-white/85 transition "+(o?"bg-white !text-[#0f0f0f] shadow ring-1 ring-white/50":"hover:bg白/10 active:bg白/20"),title:r[0].toUpperCase()+r.slice(1),"aria-label":r,children:e.jsx(K,{mode:r})},r)})})};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=R("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=R("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),z=({tabs:s,value:n,onChange:l,className:g})=>e.jsx("div",{className:(g??"")+" flex gap-1 bg-neutral-100 dark:bg-neutral-900 p-1 rounded-lg border border-neutral-200 dark:border-neutral-800",children:s.map(r=>{const o=r.key===n;return e.jsx("button",{onClick:()=>l(r.key),className:"px-3 py-1.5 rounded-md text-sm transition "+(o?"bg-white dark:bg-neutral-800 shadow border border-neutral-200 dark:border-neutral-700":"hover:bg-white/60 dark:hover:bg-neutral-800/60"),"aria-selected":o,role:"tab",children:e.jsxs("span",{className:"flex items-center gap-2",children:[r.icon,e.jsx("span",{children:r.label})]})},r.key)})}),G=()=>{const[s,n]=c.useState(null),l=c.useRef(null);if(c.useEffect(()=>{T().then(n)},[]),!s)return null;const g=async()=>{const i=JSON.stringify(s,null,2),d=new Blob([i],{type:"application/json"}),m=URL.createObjectURL(d),b=document.createElement("a");b.href=m,b.download="media-controller-settings.json",b.click(),URL.revokeObjectURL(m)},r=async i=>{const d=await i.text(),m=JSON.parse(d);await f(m),n(m)},o=async()=>{await f(x),n(x)};return e.jsxs("div",{className:"mt-3 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:s.rememberLastPerChannel,onChange:async i=>{const d={rememberLastPerChannel:i.target.checked};await f(d),n({...s,...d})}}),e.jsx("span",{children:"Remember last used speed per channel"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 hover:bg-gray-50 dark:hover:bg-neutral-800",onClick:g,children:"Export settings"}),e.jsx("input",{ref:l,type:"file",accept:"application/json",className:"hidden",onChange:i=>i.target.files&&r(i.target.files[0])}),e.jsx("button",{className:"px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 hover:bg-gray-50 dark:hover:bg-neutral-800",onClick:()=>{var i;return(i=l.current)==null?void 0:i.click()},children:"Import settings"}),e.jsx("button",{className:"ml-auto px-3 py-2 rounded-md border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-700 dark:text-red-300",onClick:o,children:"Reset to defaults"})]})]})};function N(s){return Math.round(s*100)/100}function w(s){const n=s<0?"-":"",l=Math.abs(s),g=Math.round(l*100)/100;let r=String(g);r.includes(".")&&(r=r.replace(/\.0+$/,"").replace(/(\.[0-9])0$/,"$1"));let o=`${n}${r}x`;if(o.length<=4)return o;const i=Math.round(l*10)/10;let d=String(i).replace(/\.0$/,"");return o=`${n}${d}x`,o.length<=4?o:`${n}${Math.round(l)}`}const V=()=>{const[s,n]=c.useState(x.customRates),[l,g]=c.useState(x.defaultPlaybackRate),[r,o]=c.useState(x.theme??"system"),[i,d]=c.useState(x.defaultPlaybackRate),[m,b]=c.useState(""),[p,S]=c.useState("general"),[y,M]=c.useState(null),v=c.useRef(null);c.useEffect(()=>{v.current=y},[y]),c.useEffect(()=>{(async()=>{const t=await T();n(t.customRates),g(t.defaultPlaybackRate),o(t.theme??"system"),d(t.defaultPlaybackRate||1);const[a]=await chrome.tabs.query({active:!0,currentWindow:!0});if(M((a==null?void 0:a.id)??null),a!=null&&a.id)try{await chrome.tabs.sendMessage(a.id,{type:"GET_PLAYBACK_RATE"})}catch{}})()},[]),c.useEffect(()=>{const t=document.documentElement,a=r==="dark"||r==="system"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",a)},[r]),c.useEffect(()=>{J(async(t,a)=>{var u;if(t.type==="CURRENT_PLAYBACK_RATE"){const h=((u=a.tab)==null?void 0:u.id)??null;if(h&&h===v.current){d(t.rate),g(t.rate);try{await chrome.action.setBadgeBackgroundColor({tabId:h,color:"#111827"}),chrome.action.setBadgeTextColor&&await chrome.action.setBadgeTextColor({tabId:h,color:"#FFFFFF"}),await chrome.action.setBadgeText({tabId:h,text:w(t.rate)})}catch{}}}})},[]);const B=s.length?Math.min(.1,...s):.1,E=s.length?Math.max(4,...s):4;async function k(t){const[a]=await chrome.tabs.query({active:!0,currentWindow:!0});if(a!=null&&a.id)try{await chrome.tabs.sendMessage(a.id,{type:"SET_PLAYBACK_RATE",rate:t}),await chrome.action.setBadgeBackgroundColor({tabId:a.id,color:"#111827"}),chrome.action.setBadgeTextColor&&await chrome.action.setBadgeTextColor({tabId:a.id,color:"#FFFFFF"}),await chrome.action.setBadgeText({tabId:a.id,text:w(t)})}catch{try{await chrome.scripting.executeScript({target:{tabId:a.id},func:u=>{const h=document.querySelector("video");h&&(h.playbackRate=u,h.dispatchEvent(new Event("ratechange")))},args:[t]}),await chrome.action.setBadgeBackgroundColor({tabId:a.id,color:"#111827"}),chrome.action.setBadgeTextColor&&await chrome.action.setBadgeTextColor({tabId:a.id,color:"#FFFFFF"}),await chrome.action.setBadgeText({tabId:a.id,text:w(t)})}catch{}}f({defaultPlaybackRate:t})}async function I(){await f({customRates:s,defaultPlaybackRate:l,theme:r})}const A=()=>n(t=>Array.from(new Set([...t,N((t[t.length-1]??1)+.25)])).sort((a,u)=>a-u)),j=()=>{const t=Number(m);if(!Number.isFinite(t)||t<=0)return;const a=N(t);n(u=>Array.from(new Set([...u,a])).sort((h,L)=>h-L)),b("")},F=t=>{n(a=>a.filter(u=>u!==t).sort((u,h)=>u-h))},P=[{key:"general",label:"General"},{key:"profiles",label:"Profiles"},{key:"automation",label:"Automation"},{key:"settings",label:"Settings"}];return e.jsxs("div",{className:"min-w-[360px] p-0 font-sans text-neutral-900 dark:text-neutral-100 bg-white dark:bg-neutral-950",children:[e.jsxs("div",{className:"px-4 py-3 mb-0 bg-[#0f0f0f] text-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col leading-tight",children:[e.jsx("span",{className:"text-sm opacity-80",children:"Playback Controller"}),e.jsx("h3",{className:"m-0 text-lg font-semibold tracking-wide",children:"Media Controls"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:"https://hamibash.com/faez",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md bg-white/10 hover:bg-white/20 text-white text-sm border border-white/15 transition active:scale-[.98]",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Support"})]}),e.jsx(O,{value:r,onChange:o})]})]}),e.jsxs("div",{className:"p-4 pt-3",children:[e.jsx(z,{tabs:P,value:p,onChange:S}),p==="general"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"p-4 transition bg-white border border-gray-200 shadow-sm dark:border-neutral-800 rounded-2xl dark:bg-neutral-900 hover:shadow-md",children:e.jsx(W,{min:B,max:E,value:i,onChange:async t=>{d(t),await k(t)},onClear:async()=>{d(l),await k(l)}})}),e.jsxs("div",{className:"mt-4",children:[e.jsx(D,{presets:s,onSelect:async t=>{d(t),await k(t)},onRemove:F}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("input",{type:"number",step:"0.05",placeholder:"Custom speed (e.g. 1.25)",value:m,onChange:t=>b(t.target.value),onKeyDown:t=>{t.key==="Enter"&&j()},className:"flex-1 px-3 py-2 bg-white border border-gray-200 rounded-md dark:border-neutral-800 dark:bg-neutral-900 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-neutral-700",inputMode:"decimal","aria-label":"Custom speed"}),e.jsxs("button",{onClick:j,className:"px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 hover:bg-gray-50 dark:hover:bg-neutral-800 transition active:scale-[.98] inline-flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]}),e.jsxs("button",{onClick:A,className:"px-3 py-2 rounded-md border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 hover:bg-gray-50 dark:hover:bg-neutral-800 transition active:scale-[.98] inline-flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"+0.25"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-4",children:e.jsx("div",{className:"ml-auto",children:e.jsxs("button",{onClick:I,className:"px-4 py-2 rounded-md border border-gray-200 dark:border-neutral-800 bg-neutral-900 text-white hover:bg-neutral-800 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-white transition active:scale-[.98] inline-flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})})})]}),p==="profiles"&&e.jsx(_,{}),p==="automation"&&e.jsx(U,{}),p==="settings"&&e.jsx(G,{})]})]})},Y=H(document.getElementById("root"));Y.render(e.jsx(V,{}));
